<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>YounghBlog</title><meta name="author" content="Youngh"><meta name="copyright" content="Youngh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="Stay hungry, stay foolish"><meta property="og:type" content="website"><meta property="og:title" content="YounghBlog"><meta property="og:url" content="https://younghblog.gitee.io/index.html"><meta property="og:site_name" content="YounghBlog"><meta property="og:description" content="Stay hungry, stay foolish"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.gejiba.com/images/3cb1dc95c490420f129fb73888c41e12.md.webp"><meta property="article:author" content="Youngh"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.gejiba.com/images/3cb1dc95c490420f129fb73888c41e12.md.webp"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://younghblog.gitee.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"YounghBlog",isPost:!1,isHome:!0,isHighlightShrink:!1,isToc:!1,postUpdate:"2022-04-21 12:24:17"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0!==o){const a=new Date;o=864e5*o,t={value:t,expiry:a.getTime()+o};localStorage.setItem(e,JSON.stringify(t))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const o=new Date;if(!(o.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><meta name="generator" content="Hexo 6.1.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/3cb1dc95c490420f129fb73888c41e12.md.webp" onerror='onerror=null,src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">YounghBlog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">YounghBlog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="tencent://AddContact/?fromId=50&amp;fromSubId=1&amp;subcmd=all&amp;uin=1413483899" target="_blank"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="https://www.z4a.net/images/2022/04/20/wechat.webp" target="_blank"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://www.z4a.net/images/2022/04/20/alipay.webp" target="_blank"><i class="fa-brands fa-alipay"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/posts/1243066710.html" title="Hello World"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/1243066710.html" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-20T00:38:37.834Z" title="发表于 2022-04-20 08:38:37">2022-04-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.773Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2357652358.html" title="LRU缓存机制"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="LRU缓存机制"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2357652358.html" title="LRU缓存机制">LRU缓存机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-25T16:00:00.000Z" title="发表于 2021-08-26 00:00:00">2021-08-26</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.769Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/LeeCode/">LeeCode</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/LRU/">LRU</a></span></div><div class="content">这是 LeetCode 第 146 题 。 题目描述：运用你所掌握的数据结构，设计和实现一个 LRU (最近最少使用) 缓存机制 。 实现 LRUCache 类： LRUCache(int capacity) 以正整数作为容量 capacity 初始化 LRU 缓存 int get(int key) 如果关键字 key 存在于缓存中，则返回关键字的值，否则返回 -1 。 void put(int key, int value) 如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字-值」。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值，从而为新的数据值留出空间。 进阶：你是否可以在 O(1) 时间复杂度内完成这两种操作？ 示例： 1234567891011121314151617输入:[&quot;LRUCache&quot;,&quot;put&quot;,&quot;put&quot;,&quot;get&quot;,&quot;put&quot;,&quot;get&quot;,&quot;put&quot;,&quot;get&qu ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/1960641146.html" title="C++内存分配"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="C++内存分配"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/1960641146.html" title="C++内存分配">C++内存分配</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-11T16:00:00.000Z" title="发表于 2021-08-12 00:00:00">2021-08-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.767Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/">内存分配</a></span></div><div class="content">1. 池化技术 池 是计算机技术中经常使用的一种设计模型，其内涵在于：将程序中需要经常使用的核心资源先申请出来放到一个池中，由程序自己管理，不仅能够提高资源的利用率，还能保证本程序占有的资源数量。经常使用的池化技术包括内存池和线程池。 2. 内存池 内存池 是一种动态内存分配与管理的技术。我们通常习惯使用 malloc/free等 API进行内存的申请和释放，这样导致的后果是：当程序长时间运行时，由于所申请的内存块大小不定，导致频繁使用这些 API时会产生大量的内存碎片，从而降低空间利用率。内存池是在真正使用内存之前，先申请分配一块大内存（内存池）留作备用，之后所有对内存的申请和释放操作都在这个内存池中进行。当内存池不够用时，继续从堆中申请更大的内存来扩大内存池。 3. C++中的内存分配技术 为了减少内存碎片，C++ 通过内存池来管理内存。内存池维护了 16 个空闲链表，它们分别管理大小为 8、16、24、32、…、120、128 字节的内存，基本思路是： 如果用户申请的内存大于 128 字节，直接使用 malloc() ，否则找到合适的空闲链表（需将申请内存大小 m_s ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/40140329.html" title="virtual底层实现"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="virtual底层实现"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/40140329.html" title="virtual底层实现">virtual底层实现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-07T16:00:00.000Z" title="发表于 2021-08-08 00:00:00">2021-08-08</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.774Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/virtual/">virtual</a></span></div><div class="content">在基类中，通过 virtual修饰虚函数可以实现多态的效果，下面就介绍下它的底层实现原理。 12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt;using namespace std;class Base &#123;public:	virtual void func1() &#123; cout &lt;&lt; &quot;Base - func1()&quot; &lt;&lt; endl; &#125;	virtual void func2() &#123; cout &lt;&lt; &quot;Base - func2()&quot; &lt;&lt; endl; &#125;	virtual void func3() &#123; cout &lt;&lt; &quot;Base - func3()&quot; &lt;&lt; endl;	&#125;&#125;;// 当基类的成员变量或函数被声明为虚函数后// 其子类中 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2579659560.html" title="C++智能指针"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="C++智能指针"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2579659560.html" title="C++智能指针">C++智能指针</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-04T16:00:00.000Z" title="发表于 2021-08-05 00:00:00">2021-08-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.776Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/">智能指针</a></span></div><div class="content">智能指针是用来管理指针的，主要解决两类问题：一是忘记释放内存，造成内存泄漏；二是内存提前释放，造成指针悬空。智能指针是一个类，它的行为类似于常规指针，主要区别在于它会自动释放对象。 C++ 有四种智能指针：auto_ptr, unique_ptr, shared_ptr 和 weak_ptr，其中 auto_ptr 已被 11 弃用。它们的区别在于管理底层指针的方法不同，shared_ptr允许多个指针指向同一个对象，unique_ptr则“独占”所指向的对象，weak_ptr是一种弱引用，指向 shared_ptr所管理的对象，它们都定义在 memory 头文件中。 1. auto_ptr 采用所有权模式。例如： 1234auto_ptr&lt;string&gt; p1(new string (&quot;Hello World&quot;));auto_ptr&lt;string&gt; p2;p2 = p1; // 不会报错cout &lt;&lt; *p1 &lt;&lt; endl; // 此时会报错！! 此时 auto_ptr 不会报错，因为 p2 剥夺了 p1 的所 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2892503324.html" title="CPU分支预测优化"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="CPU分支预测优化"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2892503324.html" title="CPU分支预测优化">CPU分支预测优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-21T16:00:00.000Z" title="发表于 2021-07-22 00:00:00">2021-07-22</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.766Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B-%E5%88%86%E6%94%AF%E6%9B%BF%E6%8D%A2/">分支预测 分支替换</a></span></div><div class="content">之前介绍过CPU的分支预测功能，如果错误的分支预测经常发生，性能损失就会显著增加。因为当这样的事件发生时，CPU 需要清除所有提前完成但后来被证明是错误的推测性工作，同时还需要用来自正确分支路径的指令来填充流水线。 通常，现代 CPU 会因分支预测错误而遭受 10-20 个周期的惩罚。 如今，处理器非常擅长预测分支结果，不仅可以遵循静态预测规则，还可以检测动态模式。通常，分支预测器会采用后者。 静态分支预测：由编译器决定哪个分支可能被 CPU命中，一般是第一个分支，即 if 后面的逻辑，而不是 else后面的逻辑 动态分支预测：在运行期间决定预测结果。它会在 CPU硬件中开辟一块缓存，专门记录每个分支最近几次的命中情况，然后做出预测 程序总是会遇到一些分支预测错误。通用应用程序的错误预测率在 5%-10% 的范围是正常的，如果该指标高于 10% 就要引起注意了。为了摆脱分支预测错误，最直接的方法就是摆脱分支本身。接下来就介绍两种摆脱分支的方式。 1. 用查找表替换分支 通过查找表可以避免频繁的分支。 先看一个例子： 123456789// baseline versionint ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/682752931.html" title="CPU性能分析中的术语和指标"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="CPU性能分析中的术语和指标"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/682752931.html" title="CPU性能分析中的术语和指标">CPU性能分析中的术语和指标</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-03T16:00:00.000Z" title="发表于 2021-07-04 00:00:00">2021-07-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.772Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/perf-IPC-%E5%BE%AE%E6%8C%87%E4%BB%A4%E8%9E%8D%E5%90%88-slot-%E5%8A%A8%E6%80%81%E9%A2%91%E7%8E%87%E7%BC%A9%E6%94%BE/">perf IPC 微指令融合 slot 动态频率缩放</a></span></div><div class="content">简单介绍一下 Linux 性能分析工具 perf 中所使用到的基本术语和指标。 1. Retired vs. Executed Instruction 现代处理器通常执行比程序流所需更多的指令，这主要是因为其中一些是推测执行的。 推测执行的结果不会被立即提交，当推测结果正确时，CPU 才会解除对它的阻塞并继续执行；而当推测错误的时，CPU 就会丢弃推测指令所做的所有更改，因此它们并不会正常 retire。 CPU 处理的指令可以 excuted 但不一定 retired。因此，我们通常可以推测 excuted 指令的数量高于 retired 指令的数量。 perf 可以收集 retired 指令的数量： 12$ perf stat -e instructions ./hello 4,564,863 instructions 2. CPU利用率 CPU 在某个时间段内的忙碌时间所占的比例。 如果 CPU 利用率低，通常意味着应用程序性能不佳。但是高 CPU 利用率也未必总是好事。这只能表明系统正在做一些工作，但并不知道它具体在做什么。在多线程上下文中，线程也可以在等待资源处理时自 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2175313746.html" title="CPU微架构"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="CPU微架构"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2175313746.html" title="CPU微架构">CPU微架构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-02T16:00:00.000Z" title="发表于 2021-07-03 00:00:00">2021-07-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.768Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/CPU%E5%BE%AE%E6%9E%B6%E6%9E%84-ISA-%E6%B5%81%E6%B0%B4%E7%BA%BF-%E6%8C%87%E4%BB%A4%E7%BA%A7%E5%B9%B6%E8%A1%8C-%E7%BA%BF%E7%A8%8B%E7%BA%A7%E5%B9%B6%E8%A1%8C-SIMD-Skylake-CPU%E5%89%8D%E5%90%8E%E7%AB%AF/">CPU微架构 ISA 流水线 指令级并行 线程级并行 SIMD Skylake CPU前后端</a></span></div><div class="content">简单总结一下影响软件性能的关键 CPU 架构和微架构特征。有些内容过于基础，我会只介绍重点。 1. 指令集架构（ISA） 指令集：一系列指令的集合，用来实现软件与硬件之间的通信。 指令集架构：就是在指令集的基础上增加了一些规范，比如指令的编码规范、长度规范、操作数规范等等。 部署最广泛的 ISA 有 Intel x86、ARM v8、RISC-V 等都是 64 位架构，ISA 开发人员通常确保符合规范的软件或固件将在使用该规范构建的任何处理器上执行，广泛部署的 ISA 通常还确保向后兼容性。 研究表明，使用更少的位表示变量能够节省计算和内存带宽。 因此，除了传统的 32 位和 64 位格式的数据类型之外，一些 CPU franchises 最近增加了对低精度数据类型的支持，例如 8 位整数（int8，例如 Intel VNNI）、ISA 中的 16 位浮点数（fp16、bf16） 。 2. 流水线 流水线是用于提高 CPU 速度的基础技术，其中多条指令在执行过程中重叠。最常见的流水线划分： Instruction fetch (IF) Instruction decod ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/3647999940.html" title="多发射数据通路和数据调度"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="多发射数据通路和数据调度"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/3647999940.html" title="多发射数据通路和数据调度">多发射数据通路和数据调度</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-06-24T16:00:00.000Z" title="发表于 2021-06-25 00:00:00">2021-06-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.776Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%A4%9A%E5%8F%91%E5%B0%84-%E5%8A%A8%E6%80%81%E8%B0%83%E5%BA%A6-%E4%BF%9D%E7%95%99%E7%AB%99-%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D-%E7%B2%BE%E7%A1%AE%E5%BC%82%E5%B8%B8/">多发射 动态调度 保留站 寄存器重命名 精确异常</a></span></div><div class="content">介绍两种提高流水线效率（即提高 IPC）的技术： 多发射数据通路 和 动态调度。 为了提高流水线的执行效率，一个最直观的方式就是让处理器中的每级流水线能够同时处理多条指令，这就是多发射数据通路技术。比如对于双发射流水线来说，每次都会进行两条指令的取指、译码、执行、访存和写回操作，其理想 IPC 就从单发射流水线的 1 提升到了 2。 之所以说理想情况，是因为会有各类相关（也叫冒险）所引起的阻塞，因此其实际执行效率会大打折扣。为了减少这些阻塞，引入了动态调度技术。 先看一个例子： 123DIV	$3, $2, $1ADD	$5, $4, $3SUB	$8, $7, $6 其中，DIV 与 ADD 指令有 RAW（Read After Write）相关，因此二者必须顺序执行，而 SUB 与前面两条指令都不相关，完全可以越过前面尚未执行完毕的 DIV 和 ADD 指令提前开始执行，从而减少整体的执行延迟，这就是 动态调度。 要完成此功能，需要将原有流水线中的译码阶段拆分为 发射 和 读操作数 两个阶段。发射阶段进行指令译码，并检查结构相关（两条指令要同时访问流水线中的同一个功能部件）；读操 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/3012990423.html" title="获取数组元素的物理地址范围"><img class="post_bg" src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="获取数组元素的物理地址范围"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/3012990423.html" title="获取数组元素的物理地址范围">获取数组元素的物理地址范围</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-01T16:00:00.000Z" title="发表于 2021-05-02 00:00:00">2021-05-02</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T11:41:43.779Z" title="更新于 2022-04-20 19:41:43">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80-%E6%8F%92%E6%A1%A9/">物理地址 插桩</a></span></div><div class="content">近期由于实验需要，编写了一个获取数组元素物理地址范围的小程序。 1. 获取trace 首先要对数组进行遍历，然后通过插桩工具获取到此 ROI 的物理地址。 gem5 中自带的插桩工具是可以直接获取到物理地址的，如果要使用 pintool，需要额外实现从虚拟地址到物理地址的转换，具体方法我会在后面的博文中介绍。 2. trace解码 其次，需要将获取到的 trace 解码为一行一个物理地址的形式，地址采用十进制表示。如果使用 pintool，可以直接按此格式的 trace 输出到文件。这样做主要是为了配合此工具。 这里获取到的地址中有很多与数组元素无关的地址，比如对于一个大小为 20 的数组，获取到的 trace 多达 129 条，这显然不能满足我们的需求。 3. 地址提取 最后，使用如下代码来提取数组元素的物理地址。使用时需要指定文件路径以及数组元素类型所占的字节数（默认为 4 字节）。 这里主要利用了数组的物理地址空间连续的性质，或者更具体地说，是数组的局部物理地址连续，当数组庞大到没有完整的连续内存空间来供数组使用时，就会给其分配新的内存空间，因此整体上可能不连续，但局部一定 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/3cb1dc95c490420f129fb73888c41e12.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="avatar"></div><div class="author-info__name">Youngh</div><div class="author-info__description">Stay hungry, stay foolish</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/younghblog"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="tencent://AddContact/?fromId=50&amp;fromSubId=1&amp;subcmd=all&amp;uin=1413483899" target="_blank"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="https://www.z4a.net/images/2022/04/20/wechat.webp" target="_blank"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://www.z4a.net/images/2022/04/20/alipay.webp" target="_blank"><i class="fa-brands fa-alipay"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/1243066710.html" title="Hello World"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="Hello World"></a><div class="content"><a class="title" href="/posts/1243066710.html" title="Hello World">Hello World</a><time datetime="2022-04-20T00:38:37.834Z" title="发表于 2022-04-20 08:38:37">2022-04-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2357652358.html" title="LRU缓存机制"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="LRU缓存机制"></a><div class="content"><a class="title" href="/posts/2357652358.html" title="LRU缓存机制">LRU缓存机制</a><time datetime="2021-08-25T16:00:00.000Z" title="发表于 2021-08-26 00:00:00">2021-08-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1960641146.html" title="C++内存分配"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="C++内存分配"></a><div class="content"><a class="title" href="/posts/1960641146.html" title="C++内存分配">C++内存分配</a><time datetime="2021-08-11T16:00:00.000Z" title="发表于 2021-08-12 00:00:00">2021-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/40140329.html" title="virtual底层实现"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="virtual底层实现"></a><div class="content"><a class="title" href="/posts/40140329.html" title="virtual底层实现">virtual底层实现</a><time datetime="2021-08-07T16:00:00.000Z" title="发表于 2021-08-08 00:00:00">2021-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2579659560.html" title="C++智能指针"><img src="https://img.gejiba.com/images/bda3ebf6f55c13f17ef7c81a5c26be5c.gif" data-original="https://img.gejiba.com/images/4cfae133a26962f74e027c1ae6de3855.md.webp" onerror='this.onerror=null,this.src="https://img.gejiba.com/images/4f60b4e053a96873d937752732c06a09.gif"' alt="C++智能指针"></a><div class="content"><a class="title" href="/posts/2579659560.html" title="C++智能指针">C++智能指针</a><time datetime="2021-08-04T16:00:00.000Z" title="发表于 2021-08-05 00:00:00">2021-08-05</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline"><i class="fas fa-folder-open"></i> <span>分类</span></div><ul class="card-category-list" id="aside-cat-list"><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/LeeCode/"><span class="card-category-list-name">LeeCode</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">计算机系统</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"><span class="card-category-list-name">项目部署</span><span class="card-category-list-count">2</span></a></li></ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/CPU%E5%BE%AE%E6%9E%B6%E6%9E%84-ISA-%E6%B5%81%E6%B0%B4%E7%BA%BF-%E6%8C%87%E4%BB%A4%E7%BA%A7%E5%B9%B6%E8%A1%8C-%E7%BA%BF%E7%A8%8B%E7%BA%A7%E5%B9%B6%E8%A1%8C-SIMD-Skylake-CPU%E5%89%8D%E5%90%8E%E7%AB%AF/" style="font-size:1.1em;color:#999">CPU微架构 ISA 流水线 指令级并行 线程级并行 SIMD Skylake CPU前后端</a> <a href="/tags/LRU/" style="font-size:1.1em;color:#999">LRU</a> <a href="/tags/MESI/" style="font-size:1.1em;color:#999">MESI</a> <a href="/tags/perf-IPC-%E5%BE%AE%E6%8C%87%E4%BB%A4%E8%9E%8D%E5%90%88-slot-%E5%8A%A8%E6%80%81%E9%A2%91%E7%8E%87%E7%BC%A9%E6%94%BE/" style="font-size:1.1em;color:#999">perf IPC 微指令融合 slot 动态频率缩放</a> <a href="/tags/virtual/" style="font-size:1.1em;color:#999">virtual</a> <a href="/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" style="font-size:1.1em;color:#999">内存分配</a> <a href="/tags/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B-%E5%88%86%E6%94%AF%E6%9B%BF%E6%8D%A2/" style="font-size:1.1em;color:#999">分支预测 分支替换</a> <a href="/tags/%E5%A4%9A%E5%8F%91%E5%B0%84-%E5%8A%A8%E6%80%81%E8%B0%83%E5%BA%A6-%E4%BF%9D%E7%95%99%E7%AB%99-%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D-%E7%B2%BE%E7%A1%AE%E5%BC%82%E5%B8%B8/" style="font-size:1.1em;color:#999">多发射 动态调度 保留站 寄存器重命名 精确异常</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AF%B9%E9%BD%90/" style="font-size:1.1em;color:#999">数据对齐</a> <a href="/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" style="font-size:1.1em;color:#999">智能指针</a> <a href="/tags/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80-%E6%8F%92%E6%A1%A9/" style="font-size:1.1em;color:#999">物理地址 插桩</a> <a href="/tags/%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/" style="font-size:1.1em;color:#999">程序执行过程</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" style="font-size:1.5em;color:#99a9bf">项目部署</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">15</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishdate="2022-04-21T04:24:16.924Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">18.1k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastpushdate="2022-04-21T04:24:16.946Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Youngh</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType(){window.typed=new Typed("#subtitle",{strings:["今日事&#44;今日毕","Never put off till tomorrow what you can do today"],startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}"function"==typeof Typed?subtitleType():getScript("https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js").then(subtitleType)</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script><script src="//code.tidio.co/cr6m1cccarpui7gnnxzjociu3wqtmzux.js" async></script><script>function onTidioChatApiReady(){window.tidioChatApi.hide(),window.tidioChatApi.on("close",function(){window.tidioChatApi.hide()})}window.tidioChatApi?window.tidioChatApi.on("ready",onTidioChatApiReady):document.addEventListener("tidioChat-ready",onTidioChatApiReady);var chatBtnFn=()=>{document.getElementById("chat_btn").addEventListener("click",function(){window.tidioChatApi.show(),window.tidioChatApi.open()})};chatBtnFn()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>